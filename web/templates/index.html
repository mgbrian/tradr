<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tradr - Dashboard</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link  rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400;500;600;700;900&display=swap">

    <link rel="stylesheet" href="/static/css/styles.css" />
</head>
<body id="app-root">

    <!-- Status / app bar -->
    <header>
        <div id="app-status-bar" class="surface surface--elev-1">
            <h1 id="logo">TRADR</h1>

            <div class="status-spacer"></div>

            <div class="status-item">
                <span class="status-dot is-good" aria-hidden="true"></span>
                <span id="ib-connection-status" class="status-label">IB: Connected</span>
            </div>
            <div class="status-item">
                <span class="status-dot is-good" aria-hidden="true"></span>
                <span id="drainer-status" class="status-label">Drainer: OK (lag 0)</span>
            </div>
            <div class="status-item">
                <span id="account-id" class="status-label">Account: DU1234567</span>
            </div>

            <button id="server-connect-button" class="button button--ghost">Reconnect</button>
        </div>
    </header>

    <main id="dashboard-container">

        <section id="kpi-tiles" class="tile-flex">
            <div class="tile tile--kpi">
                <div class="tile-label">Realized PnL</div>
                <div id="kpi-realized-pnl" class="tile-value is-positive">+$3,250</div>
            </div>
            <div class="tile tile--kpi">
                <div class="tile-label">Unrealized PnL</div>
                <div id="kpi-unrealized-pnl" class="tile-value is-positive">+$1,180</div>
            </div>
            <div class="tile tile--kpi">
                <div class="tile-label">Margin Used</div>
                <div id="kpi-margin-used" class="tile-value">23%</div>
            </div>
            <div class="tile tile--kpi">
                <div class="tile-label">Cash</div>
                <div id="kpi-cash" class="tile-value">$52,000</div>
            </div>
        </section>

        <!-- Main grid: left controls, right orders -->
        <section id="main-grid" class="grid-two-col">

            <!-- Left column -->
            <div id="left-column" class="stack stack--lg">

                <article id="manual-order-card" class="surface surface--elev-1">
                    <header class="section-header">
                        <h2 class="section-title">Manual Order</h2>
                    </header>

                    <form id="manual-order-form" class="form-grid" autocomplete="off">
                        <div class="form-field">
                            <label for="order-symbol" class="form-label">Symbol</label>
                            <input id="order-symbol" class="input" type="text" placeholder="AAPL" />
                        </div>

                        <div class="form-field">
                            <label for="order-side" class="form-label">Side</label>
                            <select id="order-side" class="select">
                                <option>BUY</option>
                                <option>SELL</option>
                                <option>SHORT</option>
                                <option>COVER</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <label for="order-qty" class="form-label">Quantity</label>
                            <input id="order-qty" class="input" type="number" min="1" step="1" value="100" />
                        </div>

                        <div class="form-field">
                            <label for="order-type" class="form-label">Type</label>
                            <select id="order-type" class="select">
                                <option value="MKT" selected>Market</option>
                                <option value="LMT">Limit</option>
                                <option value="STP">Stop</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <label for="order-limit-price" class="form-label">Limit / Stop</label>
                            <input id="order-limit-price" class="input" type="number" step="0.01" placeholder="—" />
                        </div>

                        <div class="form-field">
                            <label for="order-tif" class="form-label">TIF</label>
                            <select id="order-tif" class="select">
                                <option>DAY</option>
                                <option>GTC</option>
                            </select>
                        </div>

                        <div class="form-actions">
                            <button id="place-order-button" class="button button--primary" type="button">Place Order</button>
                            <button id="reset-order-form-button" class="button button--ghost" type="reset">Reset</button>
                        </div>
                    </form>
                </article>

                <!-- Algo status card -->
                <article id="algo-status-card" class="surface surface--elev-1 hidden">
                    <header class="section-header">
                        <h2 class="section-title">Algo Status</h2>
                        <span id="algo-state-badge" class="badge badge--success">RUNNING</span>
                    </header>

                    <div class="meta-grid">
                        <div class="meta-item">
                            <div class="meta-label">Strategy</div>
                            <div class="meta-value">mean-rev-01</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-label">Trades Today</div>
                            <div class="meta-value">142</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-label">PnL Today</div>
                            <div class="meta-value is-positive">+$480</div>
                        </div>
                    </div>

                    <div class="section-actions">
                        <button id="algo-stop-button" class="button button--danger">Stop</button>
                    </div>
                </article>

                <!-- Notifications -->
                <article id="notifications-card" class="surface surface--elev-1">
                    <header class="section-header">
                        <h2 class="section-title">Notifications</h2>
                    </header>
                    <ul id="notification-list" class="list list--dense">
                        <li class="list-item">
                            <span class="status-dot is-warn" aria-hidden="true"></span>
                            AAPL limit order rejected (insufficient buying power).
                        </li>
                        <li class="list-item">
                            <span class="status-dot is-good" aria-hidden="true"></span>
                            Drainer caught up (lag 0).
                        </li>
                    </ul>
                </article>

            </div>

            <!-- Right column: orders table -->
            <div id="right-column" class="stack stack--lg">
                <article id="orders-card" class="surface surface--elev-1">
                    <header class="section-header">
                        <h2 class="section-title">Orders</h2>
                        <div class="toolbar">
                            <button id="orders-cancel-selected-button" class="button button--subtle">Cancel Selected</button>
                            <button id="orders-cancel-all-button" class="button button--subtle">Cancel All</button>
                            <button id="orders-modify-button" class="button button--subtle">Modify</button>
                        </div>
                    </header>

                    <div class="table-scroll">
                        <table id="orders-table" class="table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" aria-label="select all orders" /></th>
                                    <th>ID</th>
                                    <th>Time</th>
                                    <th>Symbol</th>
                                    <th>Side</th>
                                    <th>Type</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Filled</th>
                                    <th>Status</th>
                                    <th>Message</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><input type="checkbox" /></td>
                                    <td>1021</td>
                                    <td>14:01:22</td>
                                    <td>AAPL</td>
                                    <td>BUY</td>
                                    <td>MKT</td>
                                    <td>100</td>
                                    <td>—</td>
                                    <td>100</td>
                                    <td><span class="badge badge--success">FILLED</span></td>
                                    <td>avg 172.33</td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" /></td>
                                    <td>1022</td>
                                    <td>14:02:10</td>
                                    <td>MSFT</td>
                                    <td>SELL</td>
                                    <td>LMT</td>
                                    <td>50</td>
                                    <td>426.20</td>
                                    <td>0</td>
                                    <td><span class="badge badge--info">SUBMITTED</span></td>
                                    <td>—</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>

                <article id="fills-card" class="surface surface--elev-1">
                    <header class="section-header">
                        <h2 class="section-title">Fills</h2>
                    </header>
                    <div class="table-scroll">
                        <table id="fills-table" class="table table--compact">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Exec ID</th>
                                    <th>Symbol</th>
                                    <th>Side</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Order ID</th>
                                    <th>Commission</th>
                                    <th>Venue</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>14:03:01</td>
                                    <td>9XYZ...</td>
                                    <td>SPY</td>
                                    <td>SELL</td>
                                    <td>25</td>
                                    <td>562.01</td>
                                    <td>1024</td>
                                    <td>$0.35</td>
                                    <td>SMART</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>

                <article id="portfolio-card" class="surface surface--elev-1">
                    <header class="section-header">
                        <h2 class="section-title">Positions &amp; Account Values</h2>
                    </header>

                    <div class="grid-two-col gap-md">
                        <div class="table-scroll">
                            <table id="positions-table" class="table">
                                <thead>
                                    <tr>
                                        <th>Symbol</th>
                                        <th>Pos</th>
                                        <th>Avg Cost</th>
                                        <th>Price</th>
                                        <th>Day PnL</th>
                                        <th>Unrl PnL</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>AAPL</td>
                                        <td>300</td>
                                        <td>170.40</td>
                                        <td>172.50</td>
                                        <td class="is-positive">+240</td>
                                        <td class="is-positive">+630</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="table-scroll">
                            <table id="account-values-table" class="table">
                                <thead>
                                    <tr>
                                        <th>Metric</th>
                                        <th>Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>NetLiq</td>
                                        <td>$312,450</td>
                                    </tr>
                                    <tr>
                                        <td>Buying Power</td>
                                        <td>$250,000</td>
                                    </tr>
                                    <tr>
                                        <td>Maint. Margin</td>
                                        <td>$72,000</td>
                                    </tr>
                                    <tr>
                                        <td>Cash</td>
                                        <td>$52,100</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </article>

            </div>
        </section>

    </main>

    <!-- Modify Order modal -->
        <div id="modify-modal-backdrop" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="modify-modal-title">
            <div class="modal surface surface--elev-1" role="document">
                <header class="section-header">
                    <h3 id="modify-modal-title" class="section-title">Modify Order</h3>
                </header>

                <form id="modify-order-form" class="form-grid" autocomplete="off">
                    <div class="form-field">
                        <label class="form-label">Target</label>
                        <div id="modify-target-label" class="meta-value">—</div>
                    </div>

                    <div class="form-field">
                        <label for="mod-qty" class="form-label">Quantity</label>
                        <input id="mod-qty" class="input" type="number" min="1" step="1" placeholder="— no change —" />
                    </div>

                    <div class="form-field">
                        <label for="mod-type" class="form-label">Type</label>
                        <select id="mod-type" class="select">
                            <option value="">— no change —</option>
                            <option value="MKT">Market</option>
                            <option value="LMT">Limit</option>
                            <option value="STP">Stop</option>
                        </select>
                    </div>

                    <div class="form-field">
                        <label for="mod-price" class="form-label">Limit / Stop</label>
                        <input id="mod-price" class="input" type="number" step="0.01" placeholder="— no change —" disabled />
                    </div>

                    <div class="form-field">
                        <label for="mod-tif" class="form-label">TIF</label>
                        <select id="mod-tif" class="select">
                            <option value="">— no change —</option>
                            <option value="DAY">DAY</option>
                            <option value="GTC">GTC</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button id="modify-apply-button" class="button button--primary" type="button">Apply changes</button>
                        <button id="modify-cancel-button" class="button button--ghost" type="button">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

    <script src="/static/js/bundle.js"></script>
    <script src="/static/js/main.js"></script>

</body>
</html>
